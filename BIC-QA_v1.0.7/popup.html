<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIC-QA - ä½°æ™Ÿæ™ºç®—æ™ºèƒ½é—®ç­”åŠ©æ‰‹</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="container">
        <!-- å·¦ä¾§è¾¹æ  -->
        <aside class="sidebar">
            <!-- LogoåŒºåŸŸ -->
            <div class="logo-section">
                <div class="logo-content">
                    <img src="icons/logo.png" alt="BIC-QA" class="logo-icon">
                    <!-- <div class="logo-text">
                        <h1 class="logo-title">BIC-QA</h1>
                        <p class="logo-subtitle">å›½äº§æ•°æ®åº“æ™ºèƒ½é—®ç­”</p>
                        
                    </div> -->
                </div>
            </div>

            <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
            <div class="quick-actions-sidebar">
                <div class="action-buttons-vertical">
                    <!-- <button id="pageSummaryBtn" class="sidebar-action-btn">
                        <span class="action-icon">ğŸ“‹</span>
                        <span class="action-text">ç»“è®ºæ‘˜è¦</span>
                    </button>
                    <button id="translateBtn" class="sidebar-action-btn">
                        <span class="action-icon">ğŸŒ</span>
                        <span class="action-text">ç¿»è¯‘ç»“è®º</span>
                    </button> -->
                    <button id="newSessionBtn" class="sidebar-action-btn">
                        <span class="action-icon">ğŸ†•</span>
                        <span class="action-text">å¼€å¯æ–°ä¼šè¯(New)</span>
                    </button>
                    <button id="historyBtn" class="sidebar-action-btn">
                        <span class="action-icon">ğŸ“š</span>
                        <span class="action-text">å†å²è®°å½•(History)</span>
                    </button>
                    <button id="awrAnalysisBtn" class="sidebar-action-btn">
                        <span class="action-icon">ğŸ“Š</span>
                        <span class="action-text">AWRåˆ†æ(Analysis)</span>
                    </button>

                    <!-- ä½¿ç”¨è¯´æ˜æŒ‰é’® -->
                    <button id="helpBtn" class="sidebar-action-btn help-action-btn" title="ä½¿ç”¨è¯´æ˜">
                        <span class="action-icon">â“</span>
                        <span class="action-text">ä½¿ç”¨è¯´æ˜(Help)</span>
                    </button>

                    <!-- å…¬å‘ŠæŒ‰é’® -->
                    <a href="http://www.dbaiops.cn/notice.html" target="_blank"
                        class="sidebar-action-btn announcement-btn" title="å…¬å‘Š">
                        <span class="action-icon">ğŸ“¢</span>
                        <span class="action-text">å…¬å‘Š(Notice)</span>
                    </a>
                </div>
            </div>

            <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
            <div class="help-section">
                <div class="version-info">
                    <p class="version-text">BIC-QA <span>v1.0.7</span></p>
                </div>
            </div>

        </aside>

        <!-- å³ä¾§ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">

            <!-- æœç´¢å’Œé—®ç­”åŒºåŸŸ -->
            <div class="content-area">
                <!-- æœç´¢åŒºåŸŸ -->
                <div class="search-section">
                    <div class="selector-row">
                        <div class="selector-left">
                            <div class="model-selector">
                                <label for="modelSelect">é€‰æ‹©æ¨¡å‹ï¼š</label>
                                <select id="modelSelect" class="model-select">
                                    <option value="">åŠ è½½ä¸­...</option>
                                </select>
                            </div>
                            <span class="selector-divider">/</span>
                            <div class="knowledge-base-selector">
                                <label for="knowledgeBaseSelect">é€‰æ‹©çŸ¥è¯†åº“ï¼š</label>
                                <select id="knowledgeBaseSelect" class="knowledge-base-select">
                                    <option value="">ä¸ä½¿ç”¨çŸ¥è¯†åº“(None)</option>
                                </select>
                            </div>
                            <span class="selector-divider">/</span>
                            <div class="parameter-rule-selector">
                                <label for="parameterRuleSelect">å‚æ•°è§„åˆ™ï¼š</label>
                                <select id="parameterRuleSelect" class="parameter-rule-select">
                                    <option value="">åŠ è½½ä¸­...</option>
                                </select>
                            </div>
                        </div>
                        <div class="selector-right">
                            <button id="settingsBtn" class="settings-button" title="è®¾ç½®">
                                <span class="settings-icon">âš™ï¸</span>
                                <span>è®¾ç½®(Setting)</span>
                            </button>
                            <!-- <button id="openFullPageBtn" class="settings-button" title="æ‰“å¼€å®Œæ•´é¡µé¢" style="margin-left: 10px;">
                                <span class="settings-icon">ğŸ–¥ï¸</span>
                                <span>å®Œæ•´é¡µé¢</span>
                            </button> -->
                        </div>
                    </div>

                    <!-- ç»“æœåŒºåŸŸ -->
                    <div class="result-section">
                        <div id="resultContainer" class="result-container" style="display: none;">
                            <div class="conversation-container" id="conversation-default">
                                <div class="resultListShow">
                                    <div id="questionDisplay" class="question-display" style="display: none;">
                                        <div class="question-header">
                                            <div class="user-avatar">
                                                <img src="icons/bic-user.png" alt="ç”¨æˆ·" class="avatar-img">
                                            </div>
                                            <div class="question-info">
                                                <div class="question-name">ç”¨æˆ·</div>
                                                <div class="question-time" id="questionTime"></div>
                                            </div>
                                        </div>
                                        <div class="question-content">
                                            <div id="questionText" class="question-text"></div>
                                        </div>
                                    </div>

                                    <div id="aiDisplay" class="ai-display" style="display: none;">
                                        <div class="ai-header">
                                            <div class="ai-avatar">
                                                <img src="icons/bic-an.png" alt="BIC-QA" class="avatar-img">
                                            </div>
                                            <div class="ai-info">
                                                <div class="ai-name">BIC-QA</div>
                                                <div class="ai-time" id="aiTime"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <h3 class="result-title">å›ç­”ï¼š</h3>
                                    <div id="resultText" class="result-text">
                                        <p class="result-text-tips"></p>
                                        <div class="result-text-content"></div>
                                        <div class="result-text-knowlist"></div>

                                    </div>
                                    <div class="result-actions">
                                        <div class="action-icons-row">
                                            <button id="exportButton" class="action-icon-btn export-btn" title="å¯¼å‡ºHTML">
                                                <img src="icons/download.svg" alt="å¯¼å‡º" class="action-icon-svg">
                                            </button>
                                            <button id="copyButton" class="action-icon-btn copy-btn" title="å¤åˆ¶">
                                                <img src="icons/copy.svg" alt="å¤åˆ¶" class="action-icon-svg">
                                            </button>
                                            <button id="clearButton" class="action-icon-btn clear-btn" title="æ¸…ç©º">
                                                <img src="icons/clear.svg" alt="æ¸…ç©º" class="action-icon-svg">
                                            </button>
                                            <button id="likeButton" class="action-icon-btn like-btn" title="ç‚¹èµ - å›ç­”æœ‰å¸®åŠ©">
                                                <img src="icons/good.svg" alt="ç‚¹èµ" class="action-icon-svg">
                                            </button>
                                            <button id="dislikeButton" class="action-icon-btn dislike-btn"
                                                title="å¦å®š - å›ç­”æ²¡æœ‰å¸®åŠ©">
                                                <img src="icons/bad.svg" alt="å¦å®š" class="action-icon-svg">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="input-center-wrapper">
                        <div class="input-header">
                            <h2 class="input-title">BIC-QA</h2>
                            <p class="input-subtitle">å›½äº§æ•°æ®åº“æ™ºèƒ½é—®ç­”(Database Intelligent Q&A)</p>

                        </div>
                        <div class="input-container">
                            <textarea id="questionInput" class="question-input"
                                placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜(Please enter your question)..." rows="3"></textarea>
                            <div class="character-count">
                                <span id="charCount">0</span>/500
                            </div>
                            <button id="askButton" class="ask-button" title="æé—®">
                                <span class="send-icon">â†‘</span>
                                <span class="stop-icon" style="display: none;">â¹</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- åº•éƒ¨ç‰ˆæœ¬ä¿¡æ¯ -->
                <footer class="footer">
                    <!-- <p class="version">ç‰ˆæœ¬ 1.0.5</p> -->
                    <p class="input-subtitle">"ä¸èƒ¡è¯´å…«é“çš„çŸ¥è¯†åº“ï¼Œæˆ‘ä»¬ä¼šä¸æ–­æ”¹è¿›çŸ¥è¯†åº“ï¼Œä»Šå¤©æ— æ³•å›ç­”çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå¾ˆå¿«è¡¥å……å®Œå–„ï¼Œè¯·å¸®æˆ‘ä»¬ä¸æ–­å®Œå–„è¿™ä¸ªå…¬å…±çŸ¥è¯†åº“å§ï¼<br>A
                        knowledge
                        base that doesn't talk nonsense. We will continuously improve the knowledge base. For questions
                        that cannot be answered today, we will soon supplement and refine the content. Please help us
                        keep improving this public knowledge base!</p>
                </footer>
            </div>

            <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
            <button id="backToTopBtn" class="back-to-top-btn" title="å›åˆ°é¡¶éƒ¨" style="display: none;">
                <span class="back-to-top-icon">â†‘</span>
            </button>
        </main>

        <!-- å†å²è®°å½•å¯¹è¯æ¡† -->
        <div id="historyDialog" class="dialog-overlay" style="display: none;">
            <div class="dialog-container">
                <div class="dialog-header">
                    <h3>å¯¹è¯å†å²è®°å½•</h3>
                    <button id="closeHistoryDialog" class="close-btn">Ã—</button>
                </div>
                <div class="dialog-content">
                    <div class="history-controls" style="display: none;">
                        <button id="clearHistoryBtn" class="clear-btn">æ¸…ç©ºå†å²</button>
                        <button id="exportHistoryBtn" class="export-btn" style="display: none;">å¯¼å‡ºå†å²</button>
                    </div>
                    <div id="historyList" class="history-list">
                        <!-- å†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- AWRåˆ†æå¯¹è¯æ¡† -->
        <div id="awrAnalysisDialog" class="dialog-overlay" style="display: none;">
            <div class="dialog-container awr-dialog-container">
                <div class="dialog-header">
                    <h3>AWRåˆ†æ(Analysis)</h3>
                    <button id="closeAwrDialog" class="close-btn">Ã—</button>
                </div>

                <!-- é€‰é¡¹å¡å¯¼èˆª -->
                <div class="awr-tabs">
                    <button class="awr-tab-btn active" data-tab="new">æ–°å»ºåˆ†æ(New Analysis)</button>
                    <button class="awr-tab-btn" data-tab="history">å†å²è®°å½•(History)</button>
                </div>

                <div class="dialog-content">
                    <!-- æ–°å»ºåˆ†æè¡¨å•è§†å›¾ -->
                    <div id="awrNewAnalysisView" class="awr-tab-content active">
                        <form id="awrAnalysisForm" class="awr-form">
                            <!-- ç³»ç»Ÿé—®é¢˜æ¦‚è¿° -->
                            <div class="form-group">
                                <label for="awrProblemDescription" class="form-label">ç³»ç»Ÿé—®é¢˜æ¦‚è¿°(System Issue
                                    Overview)</label>
                                <textarea id="awrProblemDescription" class="form-textarea" rows="4"
                                    placeholder="è¯·è¾“å…¥ç³»ç»Ÿé—®é¢˜æè¿°(Please enter your question)..."></textarea>
                                <p class="form-description">å¡«å†™ç›¸å¯¹æ˜ç¡®çš„ç³»ç»Ÿé—®é¢˜ï¼Œä¸ç¡®å®šä¸ç”¨è¾“å…¥ï¼Œå¦åˆ™ä¼šè¯¯å¯¼å¤§æ¨¡å‹(Please provide a relatively
                                    clear system issue description. If you are unsure about any details, it's better not
                                    to input them, as they might mislead the large language model.)</p>
                            </div>

                            <!-- æ¥æ”¶é‚®ç®± -->
                            <div class="form-group">
                                <label for="awrEmail" class="form-label required">æ¥æ”¶é‚®ç®±(Email)</label>
                                <input type="email" id="awrEmail" class="form-input" placeholder="è¯·è¾“å…¥æ¥æ”¶åˆ†ææŠ¥å‘Šçš„é‚®ç®±"
                                    required />
                                <input type="hidden" id="awrUserName" class="form-input" />
                            </div>

                            <!-- ä¸Šä¼ æ–‡ä»¶ -->
                            <div class="form-group">
                                <label for="awrFileDisplay" class="form-label required">ä¸Šä¼ æ–‡ä»¶(Upload)</label>
                                <div class="file-upload-container">
                                    <input type="text" id="awrFileDisplay" class="form-input file-display-input"
                                        placeholder="æœªé€‰æ‹©æ–‡ä»¶" readonly />
                                    <input type="file" id="awrFileInput" class="file-input-hidden" accept="*/*" />
                                    <button type="button" id="awrFileUploadBtn"
                                        class="file-upload-btn">ä¸Šä¼ æ–‡ä»¶(Upload)</button>
                                </div>
                            </div>

                            <!-- è¯­è¨€é€‰æ‹© -->
                            <div class="form-group">
                                <label for="awrLanguage" class="form-label">è¯­è¨€(Language)</label>
                                <select id="awrLanguage" class="form-input">
                                    <option value="zh" selected>ä¸­æ–‡</option>
                                    <option value="en">English</option>
                                </select>
                            </div>

                            <!-- æ“ä½œæŒ‰é’® -->
                            <div class="form-actions">
                                <button type="button" id="awrCancelBtn" class="btn-cancel">å…³é—­(Close)</button>
                                <button type="submit" id="awrSaveBtn" class="btn-save">æ‰§è¡Œåˆ†æ(Run)</button>
                            </div>
                        </form>
                    </div>

                    <!-- å†å²è®°å½•åˆ—è¡¨è§†å›¾ -->
                    <div id="awrHistoryView" class="awr-tab-content">
                        <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
                        <div class="awr-history-filters">
                            <label for="awrStartTime" class="awr-filter-label">å¼€å§‹æ—¶é—´(Start Time)ï¼š</label>
                            <input type="datetime-local" id="awrStartTime" class="form-input awr-filter-input">

                            <label for="awrEndTime" class="awr-filter-label">ç»“æŸæ—¶é—´(End Time)ï¼š</label>
                            <input type="datetime-local" id="awrEndTime" class="form-input awr-filter-input">

                            <label for="awrStatusFilter" class="awr-filter-label">ä»»åŠ¡çŠ¶æ€(Status)ï¼š</label>
                            <select id="awrStatusFilter" class="form-input awr-filter-select">
                                <option value="">å…¨éƒ¨(All)</option>
                                <option value="0">æœªåˆ†æ(Pending)</option>
                                <option value="1">æˆåŠŸ(Success)</option>
                                <option value="2">å¤±è´¥(Failed)</option>
                                <option value="3">æ‰§è¡Œä¸­(Running)</option>
                            </select>

                            <button id="awrRefreshHistoryBtn" class="awr-search-btn">
                                æœç´¢(Search)
                            </button>

                            <button id="awrResetBtn" class="awr-reset-btn">
                                é‡ç½®(Reset)
                            </button>
                        </div>

                        <!-- å†å²è®°å½•è¡¨æ ¼ -->
                        <div class="awr-history-table-container">
                            <table id="awrHistoryTable" class="awr-history-table">
                                <thead>
                                    <tr>
                                        <th>åˆ›å»ºæ—¶é—´(Create Time)</th>
                                        <th>çŠ¶æ€(Status)</th>
                                        <th>æ–‡ä»¶å(Filename)</th>
                                        <th>é—®é¢˜æè¿°(Description)</th>
                                        <th>é‚®ç®±(Email)</th>
                                        <th>è¯­è¨€(Language)</th>
                                        <th>æ“ä½œ(Action)</th>
                                    </tr>
                                </thead>
                                <tbody id="awrHistoryList">
                                    <!-- è¡¨æ ¼è¡Œå°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>

                        <!-- åˆ†é¡µæ§ä»¶ -->
                        <div class="awr-pagination">
                            <button id="awrPrevPageBtn" class="pagination-btn" disabled>ä¸Šä¸€é¡µ(Previous)</button>
                            <span id="awrPageInfo" class="pagination-info">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ (Page 1 of 1)</span>
                            <button id="awrNextPageBtn" class="pagination-btn" disabled>ä¸‹ä¸€é¡µ(Next)</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="js/knowledge_base_simple.js"></script>
        <script src="popup.js"></script>
        <script src="js/help-button.js"></script>
    </div>
</body>

</html>